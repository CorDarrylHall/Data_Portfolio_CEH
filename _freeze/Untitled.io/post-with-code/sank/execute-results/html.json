{
  "hash": "08f75cfdf0fdf0ccff063e058bb99f10",
  "result": {
    "markdown": "---\ntitle: \"Country Migration\"\nimage: country.jpeg\ncategories: \n  - Data Visualization\n  - Interactive Visualization\n  - Sankey Diagrams\n  - Data Analysis\n  - Data Science\n  - Statistical Analysis\n---\n\n```{=html}\n<style>\nbody {\n  font-family: 'Arial Narrow', sans-serif;\n  background-color: #f9f9f9;\n  color: #333;\n}\n\nh1, h2, h3, h4, h5, h6 {\n  color: #999;\n}\n\nnav {\n  background: url(\"https://www.shutterstock.com/shutterstock/videos/1069623523/preview/stock-footage-melbourne-australia-mar-motorized-moving-shot-of-new-albums-released-in-spotify-app.mp4\") no-repeat top center fixed;\n  background-size: cover;\n  height: 20vh;\n  width: 100%;\n}\n\n.panel-tabset {\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  background-color: #fff;\n  padding: 15px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n}\n\n.panel-tabset h3 {\n  margin-top: 0;\n}\n\n.panel-tabset .tab-content {\n  padding: 10px 0;\n}\n</style>\n```\n\nThis document presents an analysis of the number of people migrating from one country (left) to another (right). The interactive Sankey diagram below visualizes these migration flows, offering insights into the patterns and volume of migration between different countries.\n\n## Overview\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0     ✔ purrr   1.0.0\n✔ tibble  3.2.1     ✔ dplyr   1.1.1\n✔ tidyr   1.2.1     ✔ stringr 1.5.0\n✔ readr   2.1.3     ✔ forcats 0.5.2\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(viridis)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: viridisLite\n```\n:::\n\n```{.r .cell-code}\nlibrary(patchwork)\nlibrary(hrbrthemes)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNOTE: Either Arial Narrow or Roboto Condensed fonts are required to use these themes.\n      Please use hrbrthemes::import_roboto_condensed() to install Roboto Condensed and\n      if Arial Narrow is not on your system, please see https://bit.ly/arialnarrow\n```\n:::\n\n```{.r .cell-code}\nlibrary(circlize)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n========================================\ncirclize version 0.4.15\nCRAN page: https://cran.r-project.org/package=circlize\nGithub page: https://github.com/jokergoo/circlize\nDocumentation: https://jokergoo.github.io/circlize_book/book/\n\nIf you use it in published research, please cite:\nGu, Z. circlize implements and enhances circular visualization\n  in R. Bioinformatics 2014.\n\nThis message can be suppressed by:\n  suppressPackageStartupMessages(library(circlize))\n========================================\n```\n:::\n\n```{.r .cell-code}\nlibrary(networkD3)\n\n# Load and prepare the data\ndata <- read.table(\"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/13_AdjacencyDirectedWeighted.csv\", header=TRUE)\ndata_long <- data %>%\n  rownames_to_column() %>%\n  gather(key = 'key', value = 'value', -rowname) %>%\n  filter(value > 0)\ncolnames(data_long) <- c(\"source\", \"target\", \"value\")\ndata_long$target <- paste(data_long$target, \" \", sep=\"\")\n\n# Create nodes\nnodes <- data.frame(name=c(as.character(data_long$source), as.character(data_long$target)) %>% unique())\n\n# Create source and target IDs\ndata_long$IDsource <- match(data_long$source, nodes$name) - 1\ndata_long$IDtarget <- match(data_long$target, nodes$name) - 1\n\n# Define color scale\nColourScal <- 'd3.scaleOrdinal().range([\"#FDE725FF\",\"#B4DE2CFF\",\"#6DCD59FF\",\"#35B779FF\",\"#1F9E89FF\",\"#26828EFF\",\"#31688EFF\",\"#3E4A89FF\",\"#482878FF\",\"#440154FF\"])'\n\n# Create the Sankey diagram\nsankeyNetwork(Links = data_long, Nodes = nodes,\n              Source = \"IDsource\", Target = \"IDtarget\",\n              Value = \"value\", NodeID = \"name\", \n              sinksRight=FALSE, colourScale=ColourScal, nodeWidth=40, fontSize=13, nodePadding=20)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"sankeyNetwork html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-c0fa28199ae8ccdfba07\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-c0fa28199ae8ccdfba07\">{\"x\":{\"links\":{\"source\":[0,1,2,3,0,1,4,5,6,7,2,3,8,9,5,6,0,1,5,2,3,9,0,1,7,2,3,2,1,3,8,0,1,2,9],\"target\":[10,11,11,11,12,12,12,12,12,12,12,12,12,12,13,13,14,14,14,14,14,14,15,15,15,15,15,16,17,17,18,19,19,19,19],\"value\":[3.142471,1.630997,0.525881,0.145264,2.107883,0.601265,2.401476,1.762587,1.215929,0.17037,1.390272,0.468762,0.60923,0.449623,0.879198,0.276908,0.540887,0.97306,3.627847,1.508008,1.057904,0.169274,0.155988,0.333608,0.190706,0.34742,0.278746,1.307907,0.380388,0.781316,1.870501,0.673004,0.869311,4.902081,0.927243]},\"nodes\":{\"name\":[\"Africa\",\"East Asia\",\"South Asia\",\"South East Asia\",\"Europe\",\"Latin America\",\"North America\",\"Oceania\",\"Soviet Union\",\"West Asia\",\"Africa \",\"East.Asia \",\"Europe \",\"Latin.America \",\"North.America \",\"Oceania \",\"South.Asia \",\"South.East.Asia \",\"Soviet.Union \",\"West.Asia \"],\"group\":[\"Africa\",\"East Asia\",\"South Asia\",\"South East Asia\",\"Europe\",\"Latin America\",\"North America\",\"Oceania\",\"Soviet Union\",\"West Asia\",\"Africa \",\"East.Asia \",\"Europe \",\"Latin.America \",\"North.America \",\"Oceania \",\"South.Asia \",\"South.East.Asia \",\"Soviet.Union \",\"West.Asia \"]},\"options\":{\"NodeID\":\"name\",\"NodeGroup\":\"name\",\"LinkGroup\":null,\"colourScale\":\"d3.scaleOrdinal().range([\\\"#FDE725FF\\\",\\\"#B4DE2CFF\\\",\\\"#6DCD59FF\\\",\\\"#35B779FF\\\",\\\"#1F9E89FF\\\",\\\"#26828EFF\\\",\\\"#31688EFF\\\",\\\"#3E4A89FF\\\",\\\"#482878FF\\\",\\\"#440154FF\\\"])\",\"fontSize\":13,\"fontFamily\":null,\"nodeWidth\":40,\"nodePadding\":20,\"units\":\"\",\"margin\":{\"top\":null,\"right\":null,\"bottom\":null,\"left\":null},\"iterations\":32,\"sinksRight\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Key Insights\n\n**Migration Patterns:** Observe which countries are the most common sources and destinations for migrants.\n\n**Volume of Migration:** Identify the countries with the highest number of migrants.\n\n**Regional Trends:** Analyze the regional trends and how migration flows vary between different parts of the world.\n\n## Detailed Analysis\n\nTo dive deeper into the data, we use various visualization techniques and data summarizations:\n\n### Migration Flows\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot migration flows\nlibrary(ggplot2)\n\nmigration_flow <- data_long %>%\n  ggplot(aes(x=source, y=value, fill=target)) +\n  geom_bar(stat=\"identity\") +\n  theme_minimal() +\n  labs(title=\"Migration Flows by Country\", x=\"Source Country\", y=\"Number of Migrants\") +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\nprint(migration_flow)\n```\n\n::: {.cell-output-display}\n![](sank_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n### Top Migrating Countries\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Summarize top migrating countries\ntop_migrating_countries <- data_long %>%\n  group_by(source) %>%\n  summarize(total_migrants = sum(value)) %>%\n  arrange(desc(total_migrants)) %>%\n  head(10)\n\n# Display in a table\nlibrary(DT)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'DT'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:networkD3':\n\n    JS\n```\n:::\n\n```{.r .cell-code}\ndatatable(top_migrating_countries, options = list(pageLength = 5))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-9afaf4814556331eebd0\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-9afaf4814556331eebd0\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],[\"South Asia\",\"Africa\",\"Latin America\",\"East Asia\",\"South East Asia\",\"Soviet Union\",\"Europe\",\"West Asia\",\"North America\",\"Oceania\"],[9.981569,6.620233,6.269632,4.788629,2.731992,2.479731,2.401476,1.54614,1.492837,0.361076]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>source<\\/th>\\n      <th>total_migrants<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"lengthMenu\":[5,10,25,50,100]},\"selection\":{\"mode\":\"multiple\",\"selected\":null,\"target\":\"row\",\"selectable\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Conclusion\n\nThe migration data reveals significant trends and patterns in global migration. By leveraging data visualization tools, we can uncover valuable insights that help understand the movement of people across countries.\n\nFeel free to explore the interactive elements and delve deeper into the analysis.\n",
    "supporting": [
      "sank_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/d3-4.5.0/d3.min.js\"></script>\n<script src=\"../../site_libs/sankey-1/sankey.js\"></script>\n<script src=\"../../site_libs/sankeyNetwork-binding-0.4/sankeyNetwork.js\"></script>\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/datatables-binding-0.27/datatables.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../../site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}