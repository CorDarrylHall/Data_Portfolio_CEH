{
  "hash": "98c206dfa30123a4de5934ff25c122a3",
  "result": {
    "markdown": "---\ntitle: \"Survival Analysis of Game of Thrones Characters\"\nimage: got.jpeg\ncategories: \n  - Survival Analysis\n  - Game of Thrones\n  - Narrative Analysis\n  - Statistical Modeling\n  - Data Visualization\n  - Cox Proportional Hazards Model\n  - Kaplan-Meier Estimator\n  - Risk Analysis\n  - Storytelling Insights\n  - Plot Dynamics\n  - Thematic Analysis\n---\n\n```{=html}\n<style>\nbody {\n  font-family: 'Times New Roman', sans-serif;\n  background-color: #f9f9f9;\n  color: #333;\n}\n\nh1, h2, h3, h4, h5, h6 {\n  color: #999;\n}\n\nnav {\n  background: url(\"https://www.shutterstock.com/shutterstock/videos/1069623523/preview/stock-footage-melbourne-australia-mar-motorized-moving-shot-of-new-albums-released-in-spotify-app.mp4\") no-repeat top center fixed;\n  background-size: cover;\n  height: 20vh;\n  width: 100%;\n}\n\n.panel-tabset {\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  background-color: #fff;\n  padding: 15px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n}\n\n.panel-tabset h3 {\n  margin-top: 0;\n}\n\n.panel-tabset .tab-content {\n  padding: 10px 0;\n}\n</style>\n```\n\nThis survival analysis was conducted on a Game of Thrones dataset to analyze the expected survival time of characters. The analysis includes visualizing the survival probability by initial allegiance and whether the characters switched allegiances.\n\n## Dataset Overview\n\nThe dataset contains information about Game of Thrones characters, including their allegiance, survival time, and whether they switched allegiances.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary libraries and dataset\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0     ✔ purrr   1.0.0\n✔ tibble  3.2.1     ✔ dplyr   1.1.1\n✔ tidyr   1.2.1     ✔ stringr 1.5.0\n✔ readr   2.1.3     ✔ forcats 0.5.2\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: timechange\n\nAttaching package: 'lubridate'\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(survival)\nlibrary(survminer)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: ggpubr\n\nAttaching package: 'survminer'\n\nThe following object is masked from 'package:survival':\n\n    myeloma\n```\n:::\n\n```{.r .cell-code}\nthePath <- \"/Users/Shared/Survival Analysis/Got_dataset\"\nds <- read_csv(paste(thePath, \"character_data_S01-S08.csv\", sep = \"/\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNew names:\nRows: 359 Columns: 41\n── Column specification\n──────────────────────────────────────────────────────── Delimiter: \",\" chr\n(8): name, dth_description, icd10_dx_code, icd10_dx_text, icd10_cause_c... dbl\n(27): id, sex, religion, occupation, social_status, allegiance_last, all... lgl\n(6): ...36, ...37, ...38, ...39, ...40, ...41\nℹ Use `spec()` to retrieve the full column specification for this data. ℹ\nSpecify the column types or set `show_col_types = FALSE` to quiet this message.\n• `` -> `...36`\n• `` -> `...37`\n• `` -> `...38`\n• `` -> `...39`\n• `` -> `...40`\n• `` -> `...41`\n```\n:::\n:::\n\n\n## Survival Analysis by Allegiance\n\n### Characters Loyal to Their Allegiances\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter data for characters loyal to their allegiances\ncharacter_ds_2_1 <- ds %>%\n  filter(allegiance_switched == 1 & allegiance_last %in% 1:4)\n\n# Fit survival model\nno_switch <- survfit(Surv(character_ds_2_1$exp_time_hrs, character_ds_2_1$dth_flag) ~ character_ds_2_1$allegiance_last)\n\n# Plot survival curves\nsurv_loyal <- ggsurvplot(fit = no_switch, data = character_ds_2_1,\n                         legend = \"bottom\", \n                         legend.title = \"Allegiance\",\n                         legend.labs = c(\"Stark\", \"Targaryen\", \"Night's Watch\", \"Lannister\"),\n                         risk.table = F, conf.int = F) +\n              labs(title = \"Survival of Characters Loyal to Their Allegiances\",\n                   x = \"Time in Hours\")\nsurv_loyal\n```\n\n::: {.cell-output-display}\n![](GoT_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n### Characters Not Loyal to Their Allegiances\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter data for characters not loyal to their allegiances\ncharacter_swap <- ds %>%\n  filter(allegiance_switched == 2 & allegiance_last %in% 1:4)\n\n# Fit survival model\nswitch <- survfit(Surv(character_swap$exp_time_hrs, character_swap$dth_flag) ~ character_swap$allegiance_last)\n\n# Plot survival curves\nsurv_not_loyal <- ggsurvplot(fit = switch, data = character_swap,\n                             legend = \"bottom\", \n                             legend.title = \"Allegiance\",\n                             legend.labs = c(\"Stark\", \"Targaryen\", \"Night's Watch\", \"Lannister\"),\n                             risk.table = F, conf.int = F) +\n                  labs(title = \"Survival of Characters Not Loyal to Their Allegiances\",\n                       x = \"Time in Hours\")\nsurv_not_loyal\n```\n\n::: {.cell-output-display}\n![](GoT_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nComparison of Survival Curves\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Compare survival curves for characters who switched allegiances and those who didn't\nallegiance_switch <- survfit(Surv(ds$exp_time_hrs, ds$dth_flag) ~ ds$allegiance_switched)\n\n# Plot survival curves\nallegiance_switch2 <- ggsurvplot(fit = allegiance_switch, data = ds,\n                                 legend = \"bottom\", \n                                 legend.title = \"Swapped Allegiance?\",\n                                 legend.labs = c(\"Yes\", \"No\"),\n                                 risk.table = F, conf.int = T) +\n                      labs(title = \"Survival Curves for Characters who Swapped/Kept Allegiance\",\n                           x = \"Time to Death (Hours)\")\nallegiance_switch2\n```\n\n::: {.cell-output-display}\n![](GoT_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nOverall Survival Curve for Game of Thrones Characters\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit overall survival model\nkm2 <- survfit(Surv(time = ds$exp_time_hrs, event = ds$dth_flag) ~ 1)\n\n# Plot overall survival curve\ngot_surv <- ggsurvplot(fit = km2, data = ds,\n                       legend = \"bottom\", \n                       legend.title = \"GoT Characters\",\n                       risk.table = F, conf.int = F, surv.median.line = \"hv\") +\n            labs(title = \"Survival Curve for Game of Thrones Characters\",\n                 x = \"Time to Death (Hours)\")\ngot_surv\n```\n\n::: {.cell-output-display}\n![](GoT_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Key Insights & Analysis:\n\n**1. Survival by Allegiance:**\n\nCharacters loyal to their allegiances, such as Stark, Targaryen, Night's Watch, and Lannister, tend to have higher survival rates compared to those who switch allegiances.\n\nThe survival curves for characters loyal to their allegiances show relatively higher probabilities of survival over time.\n\n**2. Effect of Allegiance Switching:**\n\nCharacters who switch allegiances exhibit different survival patterns compared to those who remain loyal.\n\nThe survival curves for characters who switched allegiances demonstrate varying probabilities of survival, depending on their new allegiance.\n\n**3. Overall Survival:**\n\nThe overall survival curve for Game of Thrones characters provides a comprehensive view of the survival probability across all allegiances.\n\nIt showcases the general trend of character survival throughout the series, highlighting critical periods of high mortality.\n\n**4. Comparative Analysis:**\n\nComparing survival curves between characters who remained loyal and those who switched allegiances offers insights into the impact of allegiance on survival outcomes.\n\nStatistical tests, such as the log-rank test, can be employed to determine significant differences in survival between various allegiance groups.\n\n**5. Character-Specific Analysis:**\n\nFurther analysis can be conducted to explore survival patterns for specific characters or character groups, considering factors like gender, age, and storyline involvement.\n\nExamining survival trends for prominent characters can reveal narrative arcs and thematic elements influencing survival outcomes.\n\n**6. Implications for Plot and Storytelling:**\n\nSurvival analysis offers a unique perspective on narrative dynamics, character development, and plot progression within the Game of Thrones universe.\n\nUnderstanding survival patterns can shed light on the storytelling decisions made by authors and the thematic elements driving character fates.\n\n## Conclusion\n\nBy combining statistical techniques with narrative analysis, this survival analysis provides valuable insights into the complex world of Game of Thrones, uncovering patterns of allegiance, betrayal, and survival that shape the story's rich tapestry.\n",
    "supporting": [
      "GoT_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}